# 🛠️ 工程翻譯引擎使用指南

## 💡 核心理念

**消費者說「我想要...」→ Agent 說「需要做...，因為...」**

這就是 Agent 1（客戶經理）的專業價值！

---

## ✅ 設計原則（根據您的反饋調整）

### 1. **不寫死費用和工期**
   - ❌ 不寫：「每坪 1,500 元」「需要 3 天」
   - ✅ 改為：「影響預算的關鍵因素」「影響工期的關鍵因素」
   - **原因**：變數太多（坪數、材料、現場狀況、工班），寫死會誤導

### 2. **聚焦在「為什麼」和「風險」**
   - 💬 為什麼需要這個工項
   - ⚠️  不做的風險是什麼
   - 💡 專業提醒（比價格更有價值的建議）

### 3. **給替代方案，不強迫消費**
   - 告訴消費者有哪些選擇
   - 說明各方案的優缺點
   - 讓消費者自己判斷

---

## 📋 輸出範例

### 消費者需求：「我想把磁磚地板改成木地板」

Agent 翻譯成：

```
需要進行的工程項目：

1. 【必須】 拆除舊磁磚
   💬 為什麼需要：
      必須先移除舊磁磚，才能鋪設木地板。
      磁磚拆除後地面會不平，需要後續處理。

   ⚠️  不做的風險：
      無法施工，木地板無法直接鋪在磁磚上

   💡 專業提醒：
      • 拆除磁磚會產生大量粉塵和噪音，建議先與鄰居溝通
      • 確認拆除費用是否包含「垃圾清運」，這常被遺漏
      • 如果是一樓或有店面，注意不要傷到結構層

2. 【必須】 地面整平（泥作工程）
   💬 為什麼需要：
      拆除磁磚後地面會有高低差和坑洞，必須整平。
      如果不整平，木地板會不平、容易發出聲音、甚至變形。

   🔄 替代方案：
      • 如果地面落差不大（<5mm），可用自平水泥

   ⚠️  不做的風險：
      木地板不平、容易變形、踩踏有聲音、長期使用會損壞

   💡 專業提醒：
      • 整平後需要養護2-3天才能施作木地板，不能趕工
      • 要求師傅用水平儀確認平整度，誤差應<3mm
      • 如果原地面有裂縫，要先修補才不會影響新地板

3. 【建議】 防潮布/防潮墊施工
   💬 為什麼需要：
      台灣氣候潮濕，木地板直接鋪在水泥上容易受潮變形。
      防潮層可以隔絕地面濕氣，延長木地板壽命。

   🔄 替代方案：
      • 使用有防潮功能的底材
      • 選擇防水性較好的SPC地板

   ⚠️  不做的風險：
      木地板容易受潮、變形、發霉、使用壽命縮短50%以上

   💡 專業提醒：
      • 一樓、靠山邊、或曾經淹過水的房子，防潮層「必做」
      • 防潮布要重疊10-15cm，四邊要上牆10cm
      • 如果預算有限，至少在容易潮濕的區域（浴室外、陽台旁）做防潮

（以下省略其他工項...）

---

📋 施工順序：
  1️⃣ 拆除舊磁磚
  2️⃣ 地面整平（需養護等待）
  3️⃣ 鋪設防潮層
  4️⃣ 木地板施工
  5️⃣ 收邊與踢腳板
  6️⃣ 門框調整（視現場需求）
  7️⃣ 清潔驗收

---

💰 影響預算的關鍵因素：
  • 空間坪數（這是最主要的因素）
  • 木地板種類（超耐磨 < 海島型 < 實木，價差可達2-3倍）
  • 地面狀況（如果原地面很不平，整平費用會增加）
  • 是否需要拆除舊磁磚（如果是舊木地板換新，就不用拆磁磚）
  • 踢腳板材質（木質、塑膠、金屬價格不同）
  • 門的數量（每扇門調整都要額外費用）

---

⏱️  影響工期的關鍵因素：
  • 空間坪數（坪數越大，工期越長）
  • 地面整平養護時間（無法省略，需2-3天）
  • 是否要等木地板訂貨（有些特殊款需要等1-2週）
  • 施工條件（如果繼續住在裡面，工班只能白天施工，會拉長工期）
  • 社區管理規定（有些社區限制施工時間，例如只能平日9-5點）

---

📌 重要提醒：
  ⚠️ 施工期間這個空間無法使用，建議事先規劃家具搬移
  ⚠️ 拆除磁磚會有「大量粉塵和噪音」，建議：
     - 其他房間的門窗貼上封條或用濕毛巾塞門縫
     - 保護好不施工區域的家具（用防塵布）
     - 事先與鄰居溝通施工時間
  💡 地面整平後的「養護期」不能省略，否則會裂
  💡 木地板鋪好後建議靜置24小時再放重物
  💡 驗收時要注意：地板平整度、踩踏有無異音、收邊是否密合
```

---

## 🎯 Agent 1 的價值體現

### **從消費者語言 → 工程專業**

| 消費者說 | Agent 翻譯 | 為什麼這樣說 |
|---------|-----------|------------|
| "地板想換木質的" | 需要：拆除→整平→防潮→鋪設→收邊 | 解釋每個步驟的必要性和順序 |
| "浴室漏水" | 必做：拆除→防水→試水→泥作 | 強調48小時試水不能省 |
| "收納不夠" | 可選：系統櫃 vs 木作櫃 | 說明兩者價差和優缺點 |
| "牆壁髒了" | 要先判斷：是壁癌？油汙？裂痕？ | 不同問題有不同解法 |

---

## 💡 專業提醒的價值

### ❌ 不要只說「需要做防潮」

### ✅ 要說：

```
💡 專業提醒：
   • 一樓、靠山邊、或曾經淹過水的房子，防潮層「必做」
   • 防潮布要重疊10-15cm，四邊要上牆10cm
   • 如果預算有限，至少在容易潮濕的區域（浴室外、陽台旁）做防潮
```

**這些細節才是專業價值！**

---

## 🔧 技術實作

### 檔案位置
```
analysis-service/src/agents/construction_translator.py
```

### 核心類別

```python
@dataclass
class ConstructionItem:
    name: str  # 工項名稱
    why_needed: str  # 為什麼需要
    must_do: bool  # 是否必須
    alternatives: List[str]  # 替代方案
    dependencies: List[str]  # 前置工項
    risks_if_skip: str  # 不做的風險
    professional_tips: List[str]  # 專業提醒 ⭐ 這是關鍵！

@dataclass
class ConstructionPlan:
    consumer_request: str
    translated_items: List[ConstructionItem]
    construction_sequence: List[str]
    important_notes: List[str]
    budget_factors: List[str]  # 不寫死金額 ⭐
    timeline_factors: List[str]  # 不寫死工期 ⭐
```

### 使用方式

```python
translator = ConstructionTranslator()

plan = translator.translate(
    consumer_need="我想把客廳的磁磚改成木地板",
    context={
        "space_size": "8坪",
        "has_moisture_issue": False,
        "budget_level": "medium"
    }
)

# 顯示給消費者
for item in plan.translated_items:
    print(f"需要做：{item.name}")
    print(f"原因：{item.why_needed}")
    for tip in item.professional_tips:
        print(f"💡 {tip}")
```

---

## 📊 已實作的翻譯範例

### ✅ 已完成：
1. **磁磚改木地板** - 6個工項，完整的專業提醒
2. **浴室漏水重做** - 強調防水和試水的重要性
3. **廚房打掉重做** - 說明訂製等待期

### 🚧 待新增：
4. 油漆翻新
5. 收納櫃體規劃
6. 照明改善
7. 格局變更
8. 水電管線更新
9. 冷氣安裝
10. 其他常見需求...

---

## 🎓 設計哲學

### 1. **教育消費者，而非只是報價**
   - 讓消費者理解「為什麼需要這些工項」
   - 建立信任，而非資訊不對稱

### 2. **透明化，而非隱藏細節**
   - 明確說明「影響費用的因素」
   - 不寫死價格，避免誤導

### 3. **賦能消費者做決策**
   - 提供替代方案
   - 說明優缺點
   - 讓消費者自己選擇

### 4. **專業建議，而非推銷**
   - 「建議」標籤 vs 「必須」標籤
   - 說明不做的風險
   - 尊重消費者選擇

---

## 📈 未來擴充方向

1. **AI 強化**：用 LLM 動態生成工項解釋（而非寫死）
2. **圖片輔助**：每個工項附上「施工示意圖」
3. **案例庫**：「其他客戶類似情況是怎麼做的」
4. **預算試算**：雖然不寫死，但可以給「參考範圍」
5. **風險評級**：高風險、中風險、低風險
6. **優先順序建議**：預算有限時，哪些工項優先做

---

## ✨ 總結

**這個翻譯引擎的核心價值：**

1. ✅ 不寫死費用和工期（避免誤導）
2. ✅ 聚焦在「為什麼」和「風險」（教育消費者）
3. ✅ 提供專業提醒（這才是價值所在）
4. ✅ 透明化影響因素（建立信任）
5. ✅ 賦能消費者決策（而非推銷）

**這就是 Nooko 的差異化競爭力！** 🚀
