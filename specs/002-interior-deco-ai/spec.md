# Feature Specification: AI 裝潢顧問 (AI Decor Advisor)

**Feature Branch**: `003-ai-decor-advisor`
**Created**: 2025-11-17
**Status**: Draft
**Input**: User discussion on refining the product vision.

## User Scenarios & Testing *(mandatory)*

### User Story 1: 報價單健全度分析 (Quote Sanity Check) - (Priority: P1)

**As a** homeowner who is unsure if my quote is correct,
**I want to** upload my quote and have a consultation with an AI advisor,
**so that I can** get a professional judgment on whether my quote is "passing grade" (i.e., complete, reasonable, and without obvious traps).

**Why this priority**: This is the entry point of the entire service and the primary hook to attract users.

**Acceptance Scenarios**:

1.  **Given** a user lands on the service page, **When** they upload a supported file (PDF, Excel, Image), **Then** the system should accept the file and the AI should initiate a conversation with a welcoming and analytical tone.
2.  **Given** the AI has finished its analysis and conversation, **When** it presents the final report, **Then** the report must contain a section dedicated to the analysis of the original quote, highlighting potential missing items, unclear specifications, or potential risks.

---

### User Story 2: 引導式顧問對話 (Guided Consultative Conversation) - (Priority: P1)

**As a** user who is not a renovation expert,
**I am worried** that I can't accurately describe what the AI needs to know,
**so I expect** the AI to proactively guide me with visual examples and simple explanations, much like a real designer would.

**Why this priority**: This is the key to building trust and ensuring high-quality information gathering. It directly addresses a core user anxiety.

**Acceptance Scenarios**:

1.  **Given** the conversation is about room style, **When** the user mentions a style like "Nordic" or "minimalist", **Then** the AI should respond with 2-3 concept images and ask clarifying questions, e.g., "Do you prefer the simplicity of image A, or the warm wood tones of image B?".
2.  **Given** the AI asks about a technical item (e.g., "waterproofing"), **When** the user seems confused, **Then** the AI should provide a simple, one-sentence explanation, e.g., "This is a crucial step in bathrooms and kitchens to prevent leaks in the future."

---

### User Story 3: 從分析到解決方案 (From Analysis to Solution) - (Priority: P1)

**As a** homeowner who has received the AI's analysis,
**I feel** anxious about confronting my current contractor and unsure how to implement the suggestions,
**so I want** the AI to offer me a clear, seamless path to a trusted provider who can execute the project based on the new, improved specification.

**Why this priority**: This closes the business loop and transforms the tool from a simple "checker" into a "solution provider", directly leading to business opportunities.

**Acceptance Scenarios**:

1.  **Given** the AI has presented the final analysis package (spec sheet, render, etc.), **When** it concludes its summary, **Then** it must present a clear Call to Action, seamlessly transitioning from advisor to partner, e.g., "Now that we have this professional blueprint, our expert construction team is ready to help you bring it to life. Would you like us to provide a quote based on this exact specification?".
2.  **Given** the user clicks the "Invite our team" CTA, **Then** they should be taken to a simple contact/booking form to schedule a follow-up.

---

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: The system must allow users to upload files in PDF, Excel, and common image formats (JPG, PNG).
- **FR-002**: The system must use a single, core LLM to manage the entire user conversation, simulating different expert personas (advisor, designer, contractor) as needed.
- **FR-003**: The AI must be able to call an image generation service to create and display concept images within the conversation.
- **FR-004**: The final output must be a "Solution Package" containing:
    - A standardized, detailed **Project Specification Sheet** (prices optional).
    - A **Concept Rendering** based on the user's preferences.
    - (If budget is provided) A **Budget Trade-off Suggestion** list (must-haves vs. nice-to-haves).
- **FR-005**: The final output must prominently feature a Call to Action that invites the user to engage the company's own construction services.
- **FR-006**: The system must store conversation history and generated artifacts in a persistent database (e.g., Firestore).

### Key Entities

- **User**: The homeowner seeking advice.
- **Project**: A unique session for a user, identified by a project ID.
- **OriginalQuote**: The file uploaded by the user.
- **Conversation**: The series of messages between the user and the AI.
- **ProjectSpecification**: The standardized spec sheet generated by the AI.
- **ConceptAsset**: Any asset generated during the conversation (e.g., concept images, final rendering).

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: For common quote formats, the AI can identify and flag at least 80% of critical missing items (e.g., waterproofing in a bathroom renovation).
- **SC-002**: In user feedback, the "Guided Conversation" feature (with images/examples) receives an average satisfaction score of 4/5 or higher.
- **SC-003**: At least 20% of users who complete the entire AI flow click the final "Invite our team" Call to Action.