# AI 助理快速上手指南 (v2.0)

**目的**: 讓任何 AI 助理都能快速理解專案背景，並遵循最佳實踐進行開發。
**閱讀時間**: 3 分鐘

---

## 📜 四大核心原則 (強制遵守)

1.  **⚠️ 優先評估，後執行 (Assess First, Act Second)**
    - 在使用任何工具 (`Bash`, `Read`, `Grep`, `Glob` 等) 之前，**必須**先完成「強制性開發工作流程」中的成本效益評估。
    - **目標**：永遠選擇最經濟、最高效的開發方式 (`MCP` > `Subagent` > `直接工具`)。

2.  **✍️ 即時記錄日誌 (Log as You Go)**
    - 每完成一個**主要動作** (例如：成功修改一個檔案、從一次探索中獲得結論)，就**必須**立即在 `DEVELOPMENT_LOG.md` 中記錄進度。
    - **禁止**等到整個任務結束後才一次性補寫日誌。

3.  **🗣️ 統一語言 (Unified Language)**
    - 所有對使用者的回覆、註解和日誌記錄，一律使用**繁體中文**。

4.  **🚀 標準化部署 (Standardized Deployment)**
    - **絕對禁止**直接使用 `git commit` 或 `git push`。
    - 所有程式碼和文件變更，**必須**透過 `/deploy` 指令提交，以觸發自動化的品質檢查。

---

## ⚙️ 強制性開發工作流程 (MANDATORY WORKFLOW)

**所有開發任務都必須遵循此流程。**

### 步驟 1：理解任務與上下文 (1 分鐘)
- 閱讀 `DEVELOPMENT_LOG.md` 的最新條目，了解專案目前進度。
- 閱讀相關的 `specs/` 文件，確認任務需求。

### 步驟 2：工具選擇評估 (2 分鐘)
在**動手前**，先回答以下問題以選擇最合適的工具：

```
┌──────────────────────────────────────────┐
│ 1. 這個任務需要重複呼叫 API 或執行指令 (3 次以上) 嗎？    │
│    → 是：優先使用或建置 MCP Server。                     │
│                                                          │
│ 2. 這個任務需要探索性搜尋或多輪試錯嗎？                  │
│    → 是 (且我是 Claude)：使用 Subagent。                 │
│    → 是 (但我不是 Claude)：使用 MCP 或多次直接工具。     │
│                                                          │
│ 3. 這個任務是單一、明確的操作嗎？                        │
│    → 是：使用直接工具 (Read, Edit, Bash)。               │
└──────────────────────────────────────────┘
```
**AI 模型支援**:
- **MCP Server**: ✅ 所有 AI 模型皆可使用。
- **Subagent (Task tool)**: ⚠️ **僅限 Claude 專屬功能**。若您不是 Claude，請使用 MCP 或告知使用者此限制。

### 步驟 3：提案與確認 (1 分鐘)
- 根據評估結果，向使用者簡要提案：
  - 「我將使用 **[選擇的工具]** 來完成 **[任務目標]**。」
- 請求使用者確認後，再開始執行。

### 步驟 4：執行與記錄
- 使用選擇的工具執行任務。
- **每完成一個主要步驟，立即更新 `DEVELOPMENT_LOG.md`**。

---

## 📚 參考指南與 SOPs (Reference & SOPs)

此區塊為具體操作的詳細指南，僅在需要時查閱。

### 1. MCP Server 建置與使用
- **何時使用**：需要重複呼叫 API (如 `gcloud`, `firestore`) 3 次以上，或需要快取結果時。
- **效益**：節省 85-95% 的 Token 消耗。
- **建置指南**：請參考本機 `tools/` 目錄下的 `README.md`，例如 `tools/project_search/README.md`。
- **現有工具**：執行 `cat ~/.claude/mcp_config.json | jq '.mcpServers | keys'` 檢查已配置的 MCP。

### 2. Subagent 使用 (Claude 專屬)
- **何時使用**：需要探索性搜尋大量檔案，或進行多輪試錯 (如測試不同參數)。
- **效益**：將試錯過程隔離，避免污染主對話的上下文，節省約 70% Token。
- **使用範例**：
  ```python
  # 探索程式碼
  Task(subagent_type="Explore", prompt="找出所有 Agent 的類別定義。")
  # 隔離試錯
  Task(subagent_type="general-purpose", prompt="測試三種不同的 API 參數，找出最佳組合。")
  ```

### 3. Git 部署規範 (`/deploy` 指令)
- **流程**：`git add <files>` ➜ 執行 `/deploy`。
- **自動化檢查**：此指令會自動檢查 Markdown、Python、YAML、JSON 的語法與格式，通過後才會 commit & push。
- **目的**：確保程式碼庫的品質與一致性。

### 4. 專案上下文快速查閱
- **上次進度？** → `DEVELOPMENT_LOG.md`
- **專案架構？** → `specs/001-sales-ai-automation/plan.md`
- **功能規格？** → `specs/001-sales-ai-automation/spec.md`
- **關鍵決策？** → `DEVELOPMENT_LOG.md` 中的 "Key Decisions" 區塊。

---

## ✅ 任務開始前自我檢查 (Final Self-Check)

- [ ] 我已理解四大核心原則。
- [ ] 我會遵循強制性開發工作流程，先評估再執行。
- [ ] 我承諾會**即時更新** `DEVELOPMENT_LOG.md`。
- [ ] 我知道部署時**必須**使用 `/deploy` 指令。

---
*文件版本: 2.0 (優化版)*
*上次更新: 2025-11-17*
*主要變更: 合併重複流程，並新增即時日誌記錄規則。*
